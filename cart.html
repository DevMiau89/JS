<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>First Script</title>
</head>
<body>
    <h1>Shopping Cart</h1>
    <script language = "Javascript">
        var cart = [];

        var Item = function(name, price, count){
            this.name = name
            this.price = price
            this.count = count
        };

        function addItemToCart(name, price, count){
            for (var i in cart) {
                if (cart[i].name === name) {
                    cart[i].count += count;
                    return;
                }
            }
            var item = new Item(name, price, count);
            cart.push(item);
            saveCart();
        }

        function removeItemFromCart(name) { // removes one item
            for (var i in cart) {
                if (cart[i].name === name) {
                    cart[i].count --;
                    if (cart[i].count === 0) {
                        cart.spice( i, 1);
                    }
                    return;
                }
            }
            saveCart();
        }

        function removeItemFromCartAll(name) {  // removes all item name
            for( var i in cart ) {
                if(cart[i].name === name) {
                    cart.splice(i, 1);
                    return;
                }
            }
            saveCart();
        }

        function clearCart() {
            cart = [];
            saveCart();
        }

        function countCart() {   //-> return total count
            var totalCount = 0;
            for (var i in cart) {
                totalCount += cart[i].count;
            }

            return totalCount;
        }

        console.log( countCart() );

        function totalCost(){ //-> return total cost
            var totalCost = 0;
            for (var i in cart) {
                totalCost += cart[i].price
            }
            return totalCost;
        }

        console.log( totalCost() );

        function  listCart() {  //-> array of Items
            var cartCopy = [];
            for (var i in cart) {
                var item = cart[i];
                var itemCopy = {};
                for (var p in item) {
                    itemCopy[p] = item[p];
                }
                cartCopy.push(itemCopy);
            }
            return cartCopy;
        }

        console.log( listCart() );


        function saveCart() {
            localStorage.setItem("shoppingCart", JSON.stringify(cart));
        }

        function loadCart() {
            cart = JSON.parse(localStorage.getItem("s  hoppingCart"));
        }

        loadCart();

        var array = listCart();
        console.log(array);

    </script>
</body>
</html>
